## Курс Patroni
#### Author https://aristov.tech
#### Входит в (линейку курсов для B2B)[https://aristov.tech/blog/linejka-kursov-dlya-b2b/]
#### Формат: онлайн-лекции 
#### Продолжительность одной лекции: 2 ак.часа
#### Курс рассчитан на 5 лекций
#### Запись занятий и все материалы будут доступны на Яндекс-диске
#### Для б2с необходимо набрать группу - пишите в личку

#### Курс предназначен для глубокого изучения MongoDB — одной из самых популярных NoSQL баз данных. 
Курс от aristov.tech предназначен для глубокого изучения Patroni — одного из самых популярных отказоустойчивых решений для PostgreSQL. 
Доступен для заказа B2B клиентам.

#### Для кого этот курс:
Разработчики: поймут и применят в практике особенности работы с балансировкой читающей и пишущей нагрузкой в Patroni.
Администраторы баз данных: освоят отказоустойчивые и автоматизированные кластеры PostgreSQL на основе Patroni.
DevOps-инженеры: развертывание и управление Patroni в Kubernetes.

#### Итоговые навыки:
Понимание роли Patroni в управлении PostgreSQL
Зачем нужен Patroni и как он обеспечивает высокую доступность (HA).
Сравнение с другими решениями (PgBouncer, repmgr, Stolon).
Развертывание и настройка кластера
Установка Patroni и его зависимостей (etcd/Consul/ZooKeeper).
Конфигурация репликации и автоматического фейловера.
Обеспечение отказоустойчивости
Механизмы мониторинга состояния нод.
Автоматическое переключение ролей (failover/switchcover).
Восстановление после сбоев.
Настройка мониторинга (Prometheus, Grafana, Alertmanager).
Логирование и анализ событий.
Оптимизация и безопасность
Практические сценарии
Разбор реальных кейсов (потеря quorum, сетевые проблемы).
Ручное и автоматическое управление кластером.

#### Предлагаемая программа курса по MongoDB (20 ак.ч):
01. Построение HA кластера Patroni часть 1 (2 ак.ч)
02. Построение HA кластера Patroni часть 2 (2 ак.ч)
03. Мониторинг Patroni (2 ак.ч)
04. Резервное копирование в Patroni — современные подходы (2 ак.ч)
05. Patroni in Kubernetes (2 ак.ч)


#### Программа курса по patroni (10.ак.ч):
01. Построение HA кластера Patroni часть 1
 *HA-кластера PostgreSQL
 *Разбор архитектуры ETCD/Patroni/Pgbouncer/HAProxy/KeepaliveD
*Критичные параметры конфигурации
*Траблшутинг ETCD
*Работа на стенде в облачном исполнении

02. Построение HA кластера Patroni часть 2
Отказоустойчивый кластер Patroni с нуля
Управление нодами в Patroni/ETCD — переключение, добавление, удаление
Выведение ноды для обслуживания
Восстановление после отказа
Работа на стенде в облачном исполнении

03. Мониторинг Patroni
Критичные параметры для мониторинга
Основы Prometheus + Grafana и современные альтернативы
Практическое развертывание мониторинга на базе PMM для ETCD/Patroni

04. Настройка резервного копирования
современные подходы к резервному копированию — их положительные и отрицательные стороны
настройка последних версий WAL-G, pg_probackup + под нагрузкой в Patroni кластере с уже настроенным мониторингом
настройка автоматизированных бэкапов (N delta -> full, retention policy)
настройки сжатия бэкапов в wal-g — сравнение скорости и степени сжатия
использование продвинутых вариантов хранилищ для бэкапов — s3, gcs, samba (cifs)

05. Patroni in Kubernetes
Основные варианты развертывания со своимим особенностям
Operator vs Helm chart
Практика установки Patroni + load balancer + proxy in managed K8s
Итоги и чеклист по Patroni


